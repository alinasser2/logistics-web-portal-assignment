<div class="form-container">
  <div class="form-header">
    <h2 class="section-title">Create New Shipment</h2>
    <p class="form-subtitle">Fill in the details below to create a new shipment</p>
  </div>

  <div *ngIf="error$ | async as error" class="message error">
    <svg class="message-icon" viewBox="0 0 24 24">
      <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" />
    </svg>
    {{ error }}
  </div>
  
  <div *ngIf="success$ | async as success" class="message success">
    <svg class="message-icon" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z" />
    </svg>
    {{ success }}
  </div>

  <form [formGroup]="shipmentForm" (ngSubmit)="onSubmit()" class="shipment-form">
    <div class="form-group" [class.has-error]="shipmentForm.get('trackingId')?.touched && shipmentForm.get('trackingId')?.invalid">
      <label for="trackingId">Tracking ID</label>
      <input id="trackingId" formControlName="trackingId" type="text" class="form-control" placeholder="Enter unique tracking ID" />
      <div *ngIf="shipmentForm.get('trackingId')?.touched && shipmentForm.get('trackingId')?.invalid" class="error-message">
        <svg viewBox="0 0 24 24" width="16" height="16">
          <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" />
        </svg>
        <span *ngIf="shipmentForm.get('trackingId')?.errors?.['required']">Tracking ID is required</span>
        <span *ngIf="shipmentForm.get('trackingId')?.errors?.['minlength']">Tracking ID must be at least 1 character</span>
      </div>
    </div>

    <div class="form-group" [class.has-error]="shipmentForm.get('phoneNumber')?.touched && shipmentForm.get('phoneNumber')?.invalid">
      <label for="phoneNumber">Phone Number</label>
      <input id="phoneNumber" formControlName="phoneNumber" type="text" class="form-control" placeholder="e.g. 0123456789 or +20123456789" />
      <div *ngIf="shipmentForm.get('phoneNumber')?.touched && shipmentForm.get('phoneNumber')?.invalid" class="error-message">
        <svg viewBox="0 0 24 24" width="16" height="16">
          <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" />
        </svg>
        <span *ngIf="shipmentForm.get('phoneNumber')?.errors?.['required']">Phone number is required</span>
        <span *ngIf="shipmentForm.get('phoneNumber')?.errors?.['invalidPhoneNumber']">Valid Egyptian phone number is required</span>
      </div>
    </div>

    <div class="form-group" [class.has-error]="shipmentForm.get('description')?.touched && shipmentForm.get('description')?.invalid">
      <label for="description">Description</label>
      <input id="description" formControlName="description" type="text" class="form-control" placeholder="Enter shipment description" />
      <div *ngIf="shipmentForm.get('description')?.touched && shipmentForm.get('description')?.invalid" class="error-message">
        <svg viewBox="0 0 24 24" width="16" height="16">
          <path fill="currentColor" d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" />
        </svg>
        <span *ngIf="shipmentForm.get('description')?.errors?.['required']">Description is required</span>
        <span *ngIf="shipmentForm.get('description')?.errors?.['minlength']">Description must be at least 1 character</span>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="submit-btn" [disabled]="shipmentForm.invalid">
        Create Shipment
        <svg class="btn-icon" viewBox="0 0 24 24" width="18" height="18">
          <path fill="currentColor" d="M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M17,12L12,7V10H8V14H12V17L17,12Z" />
        </svg>
      </button>
    </div>
  </form>
</div>